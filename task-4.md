# Django + PostgreSQL + Nginx –≤ Docker üê≥

–ë–∞–≥–∞—Ç–æ—Å–µ—Ä–≤—ñ—Å–Ω–∏–π –≤–µ–±-–ø—Ä–æ—î–∫—Ç –Ω–∞ Django –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—ó Docker. –ü—Ä–æ—î–∫—Ç –≤–∫–ª—é—á–∞—î Django –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, –±–∞–∑—É –¥–∞–Ω–∏—Ö PostgreSQL —Ç–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä Nginx –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –ø—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤.

[–ù–∞ –≥–æ–ª–æ–≤–Ω—É](./README.md)

## üöÄ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –ø—Ä–æ—î–∫—Ç—É

- **Django 4.2+** ‚Äî —Å—É—á–∞—Å–Ω–∏–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ Python
- **PostgreSQL 15** ‚Äî –Ω–∞–¥—ñ–π–Ω–∞ —Ä–µ–ª—è—Ü—ñ–π–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Nginx** ‚Äî –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Ç–∞ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –ø—Ä–æ–∫—Å—ñ
- **Docker Compose** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è –±–∞–≥–∞—Ç–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
- **Gunicorn** ‚Äî WSGI HTTP-—Å–µ—Ä–≤–µ—Ä –¥–ª—è production

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
django-docker-project/
‚îú‚îÄ‚îÄ Dockerfile                 # –û–±—Ä–∞–∑ –¥–ª—è Django –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
‚îú‚îÄ‚îÄ docker-compose.yml         # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îú‚îÄ‚îÄ docker-entrypoint.sh       # –°–∫—Ä–∏–ø—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Django
‚îú‚îÄ‚îÄ requirements.txt           # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ django_app/               # Django –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ manage.py
‚îÇ   ‚îî‚îÄ‚îÄ myproject/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ asgi.py
‚îÇ       ‚îú‚îÄ‚îÄ settings.py        # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Django
‚îÇ       ‚îú‚îÄ‚îÄ urls.py
‚îÇ       ‚îî‚îÄ‚îÄ wsgi.py
‚îî‚îÄ‚îÄ nginx/
    ‚îî‚îÄ‚îÄ nginx.conf            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Nginx
```

## üõ† –¢–µ—Ö–Ω—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏

- Docker Engine 20.10+
- Docker Compose 2.0+
- Git

## ‚ö° –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <your-repository-url>
cd django-docker-project
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—É

```bash
# –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä —Ç–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ –∞–¥—Ä–µ—Å–æ—é: http://localhost

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ –ø—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–ü—Ä–∏–≤—ñ—Ç! Django –ø—Ä–∞—Ü—é—î –∑ PostgreSQL —Ç–∞ Nginx!"

## üêò –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö

### –î–æ—Å—Ç—É–ø –¥–æ PostgreSQL

```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
docker-compose exec db psql -U postgres -d myproject_db

# –í–∏–∫–æ–Ω–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π Django
docker-compose exec web python manage.py migrate

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
docker-compose exec web python manage.py createsuperuser
```

### –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è

–î–æ—Å—Ç—É–ø –¥–æ Django Admin: http://localhost/admin/

## üìä –°–µ—Ä–≤—ñ—Å–∏ –ø—Ä–æ—î–∫—Ç—É

| –°–µ—Ä–≤—ñ—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å |
|--------|------|------|
| `nginx` | 80 | –í–µ–±-—Å–µ—Ä–≤–µ—Ä, —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏, –ø—Ä–æ–∫—Å—ñ |
| `web` | 8000 | Django –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (Gunicorn) |
| `db` | 5432 | PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–∏—Ö |

## üîß –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤ `docker-compose.yml`:

```yaml
environment:
  - POSTGRES_DB=myproject_db
  - POSTGRES_USER=postgres
  - POSTGRES_PASSWORD=postgres
  - DB_HOST=db
  - DB_PORT=5432
```

## üìù –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose up -d

# –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose down

# –ü–µ—Ä–µ–∑–±—É–¥–æ–≤–∞ –æ–±—Ä–∞–∑—ñ–≤
docker-compose build --no-cache

# –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É
docker-compose ps
```

### Django –∫–æ–º–∞–Ω–¥–∏

```bash
# –í–∏–∫–æ–Ω–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
docker-compose exec web python manage.py migrate

# –ó–±–∏—Ä–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
docker-compose exec web python manage.py collectstatic

# –î–æ—Å—Ç—É–ø –¥–æ Django shell
docker-compose exec web python manage.py shell
```

### –õ–æ–≥–∏ —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å–∞
docker-compose logs web
docker-compose logs db
docker-compose logs nginx

# –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose exec web bash
```

## üîí –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ Production

‚ö†Ô∏è **–í–∞–∂–ª–∏–≤–æ –¥–ª—è production:**

1. **–ó–º—ñ–Ω—ñ—Ç—å SECRET_KEY** –≤ `settings.py`
2. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å DEBUG = False**
3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ ALLOWED_HOSTS**
4. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞** –¥–ª—è –ø–∞—Ä–æ–ª—ñ–≤
5. **–î–æ–¥–∞–π—Ç–µ SSL/TLS** —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏

## üêõ –£—Å—É–Ω–µ–Ω–Ω—è –Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ health check PostgreSQL

```bash
docker-compose exec db pg_isready -U postgres
```

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ PostgreSQL –Ω–µ –ø—Ä–∞—Ü—é—î

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `db` –∑–∞–ø—É—â–µ–Ω–∏–π
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ health check —Å—Ç–∞—Ç—É—Å
3. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### Nginx –Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É—î —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏

1. –í–∏–∫–æ–Ω–∞–π—Ç–µ `python manage.py collectstatic`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–º `static_volume` –≤ docker-compose.yml

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—É—Ü—ñ—è

–î–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É:

1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature-–≥—ñ–ª–∫—É: `git checkout -b feature/amazing-feature`
3. –ó–∞—Ñ—ñ–∫—Å—É–π—Ç–µ –∑–º—ñ–Ω–∏: `git commit -m 'Add amazing feature'`
4. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–º—ñ–Ω–∏: `git push origin feature/amazing-feature`
5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request

## üìú –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ –≤ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Ü—ñ–ª—è—Ö.

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏, —Å—Ç–≤–æ—Ä—ñ—Ç—å Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.

---

**üéØ –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ!** 

–ü—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—é Django –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∑ PostgreSQL —Ç–∞ Nginx, –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —É production —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.