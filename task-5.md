# Terraform Infrastructure Project (Lesson 5)

–¶–µ–π –ø—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥—É–ª—å–Ω–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ AWS –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Terraform –¥–ª—è –∫—É—Ä—Å—É –∑ Infrastructure as Code (IaC).

## üìã –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É

–ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É AWS –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –º–æ–¥—É–ª—å–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É Terraform, –≤–∫–ª—é—á–∞—é—á–∏:

- **S3 Backend** - –±–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è Terraform state —Ñ–∞–π–ª—ñ–≤ –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º —á–µ—Ä–µ–∑ DynamoDB
- **VPC Infrastructure** - –º–µ—Ä–µ–∂–µ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ –ø—É–±–ª—ñ—á–Ω–∏–º–∏ —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏ –ø—ñ–¥–º–µ—Ä–µ–∂–∞–º–∏
- **ECR Repository** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∏–π —Ä–µ—î—Å—Ç—Ä –¥–ª—è Docker –æ–±—Ä–∞–∑—ñ–≤ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è–º

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .terraform.lock.hcl
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ screenshot _1.jpg
‚îÇ   ‚îú‚îÄ‚îÄ screenshot _2.jpg
‚îÇ   ‚îú‚îÄ‚îÄ screenshot _3.jpg
‚îÇ   ‚îú‚îÄ‚îÄ screenshot _4.jpg
‚îÇ   ‚îú‚îÄ‚îÄ screenshot _5.jpg
‚îÇ   ‚îú‚îÄ‚îÄ screenshot _6.jpg
‚îÇ   ‚îî‚îÄ‚îÄ screenshot _7.jpg
‚îú‚îÄ‚îÄ backend.tf.disabled
‚îú‚îÄ‚îÄ main.tf
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ ecr/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ecr.tf
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ outputs.tf
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ variables.tf
‚îÇ   ‚îú‚îÄ‚îÄ s3-backend/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dynamodb.tf
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ outputs.tf
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ s3.tf
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ variables.tf
‚îÇ   ‚îî‚îÄ‚îÄ vpc/
‚îÇ       ‚îú‚îÄ‚îÄ outputs.tf
‚îÇ       ‚îú‚îÄ‚îÄ routes.tf
‚îÇ       ‚îú‚îÄ‚îÄ variables.tf
‚îÇ       ‚îî‚îÄ‚îÄ vpc.tf
‚îî‚îÄ‚îÄ outputs.tf
```

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- AWS CLI –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É
- Terraform >= 1.0 –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- Git –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤–µ—Ä—Å—ñ—è–º–∏

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

1. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É:**
   ```bash
   terraform init
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–Ω—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:**
   ```bash
   terraform plan
   ```

3. **–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω:**
   ```bash
   terraform apply
   ```

4. **–ó–Ω–∏—â–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏:**
   ```bash
   terraform destroy
   ```

## üì¶ –ú–æ–¥—É–ª—ñ –ø—Ä–æ—î–∫—Ç—É

### üóÑÔ∏è S3-Backend Module (`modules/s3-backend/`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è Terraform state —Ñ–∞–π–ª—ñ–≤.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- **S3 Bucket** –∑ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º –≤–µ—Ä—Å—ñ—é–≤–∞–Ω–Ω—è–º —Ç–∞ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è–º AES256
- **DynamoDB Table** –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è state —Ñ–∞–π–ª—ñ–≤ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π
- **–ü—É–±–ª—ñ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π** –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏

**–§–∞–π–ª–∏:**
- `s3.tf` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è S3 bucket
- `dynamodb.tf` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è DynamoDB —Ç–∞–±–ª–∏—Ü—ñ
- `variables.tf` - –∑–º—ñ–Ω–Ω—ñ –º–æ–¥—É–ª—è
- `outputs.tf` - –≤–∏—Ö—ñ–¥–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è (bucket name, table name, ARNs)

### üåê VPC Module (`modules/vpc/`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–∑–æ–ª—å–æ–≤–∞–Ω–æ—ó –º–µ—Ä–µ–∂–µ–≤–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ AWS.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- **VPC** –∑ CIDR –±–ª–æ–∫–æ–º 10.0.0.0/16
- **3 –ø—É–±–ª—ñ—á–Ω—ñ –ø—ñ–¥–º–µ—Ä–µ–∂—ñ** (10.0.1.0/24, 10.0.2.0/24, 10.0.3.0/24)
- **3 –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø—ñ–¥–º–µ—Ä–µ–∂—ñ** (10.0.4.0/24, 10.0.5.0/24, 10.0.6.0/24)
- **Internet Gateway** –¥–ª—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
- **NAT Gateway** –¥–ª—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É –∑ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø—ñ–¥–º–µ—Ä–µ–∂
- **Route Tables** –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó

**–§–∞–π–ª–∏:**
- `vpc.tf` - –æ—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è VPC —Ç–∞ –ø—ñ–¥–º–µ—Ä–µ–∂
- `routes.tf` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó
- `variables.tf` - –∑–º—ñ–Ω–Ω—ñ –º–æ–¥—É–ª—è
- `outputs.tf` - —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏

### üê≥ ECR Module (`modules/ecr/`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è Docker –æ–±—Ä–∞–∑–∞–º–∏ –≤ AWS Elastic Container Registry.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- **ECR Repository** –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –∑–º—ñ–Ω–∏ —Ç–µ–≥—ñ–≤ (MUTABLE)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è** –æ–±—Ä–∞–∑—ñ–≤ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π
- **Repository Policy** –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É
- **Lifecycle Policy** - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 10 –æ–±—Ä–∞–∑—ñ–≤

**–§–∞–π–ª–∏:**
- `ecr.tf` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è ECR —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ç–∞ –ø–æ–ª—ñ—Ç–∏–∫
- `variables.tf` - –∑–º—ñ–Ω–Ω—ñ –º–æ–¥—É–ª—è
- `outputs.tf` - URL —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–Ω—ñ

- `aws_region` - AWS —Ä–µ–≥—ñ–æ–Ω (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: us-west-2)
- `environment` - —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: dev)
- `bucket_name` - —ñ–º'—è S3 bucket –¥–ª—è state —Ñ–∞–π–ª—ñ–≤
- `vpc_cidr_block` - CIDR –±–ª–æ–∫ –¥–ª—è VPC
- `ecr_name` - —ñ–º'—è ECR —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

### Backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ü—Ä–æ—î–∫—Ç –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è S3 backend (—Ñ–∞–π–ª `backend.tf.disabled`). –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è S3 bucket —Ç–∞ DynamoDB table:

1. –ü–µ—Ä–µ–π–º–µ–Ω—É–π—Ç–µ `backend.tf.disabled` –≤ `backend.tf`
2. –û–Ω–æ–≤—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏
3. –í–∏–∫–æ–Ω–∞–π—Ç–µ `terraform init` –¥–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó state

## üîí –ë–µ–∑–ø–µ–∫–∞

- S3 bucket –∑ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è–º AES256
- –ü—É–±–ª—ñ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ S3 bucket –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π
- ECR –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞–Ω—É—î –æ–±—Ä–∞–∑–∏ –Ω–∞ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ
- DynamoDB –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å state —Ñ–∞–π–ª—ñ–≤

## üì∏ –°–∫—Ä—ñ–Ω—à–æ—Ç–∏

–ü—Ä–æ—î–∫—Ç –≤–∫–ª—é—á–∞—î —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏ –ø—Ä–æ—Ü–µ—Å—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –≤ –ø–∞–ø—Ü—ñ `assets/`.

## ü§ù –í–Ω–µ—Å–æ–∫ —É –ø—Ä–æ—î–∫—Ç

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –Ω–∞–≤—á–∞–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å—É –∑ Infrastructure as Code. –í—ñ–Ω –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î best practices –¥–ª—è:

- –ú–æ–¥—É–ª—å–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ Terraform
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è state —Ñ–∞–π–ª–∞–º–∏
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—ó –º–µ—Ä–µ–∂–µ–≤–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- –ë–µ–∑–ø–µ—á–Ω–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∏—Ö –æ–±—Ä–∞–∑—ñ–≤

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ü—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –≤ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Ü—ñ–ª—è—Ö.